var cvi_stactive,cvi_stpiece,snapfit={version:1.5,released:"2011-07-21 12:00:00",defaultSimple:!0,defaultAreaborder:!1,defaultSpace:10,defaultAreaopacity:.2,defaultMixed:!1,defaultAreaimage:!0,defaultSnap:8,defaultBorderopacity:.5,defaultFalsecolor:"#ff0000",defaultAreacolor:"#e0e0e0",defaultShadowopacity:.75,defaultMatchcolor:"#00d000",defaultBgrndcolor:"#000000",defaultBorderwide:2,defaultLevel:3,defaultTofront:!1,defaultNokeys:!0,defaultPolygon:!0,defaultForcetouchui:!1,defaultCallback:!1,add:function(t,o){function e(){var t=Date.parse(new Date)+Math.floor(1e11*Math.random());return t.toString(16)}function i(t){function o(t){return Math.max(0,Math.min(parseInt(t,16),255))}return o(t.substr(1,2))+","+o(t.substr(3,2))+","+o(t.substr(5,2))}function s(t){return"#"+t.toString(16)+t.toString(16)+t.toString(16)}if("IMG"==t.tagName.toUpperCase()&&t.width>=128&&t.height>=128){var a,r,n,h,l=0,c={polygon:snapfit.defaultPolygon,level:snapfit.defaultLevel,space:snapfit.defaultSpace,snap:snapfit.defaultSnap,mixed:snapfit.defaultMixed,simple:snapfit.defaultSimple,nokeys:snapfit.defaultNokeys,tofront:snapfit.defaultTofront,bcolor:snapfit.defaultBgrndcolor,fcolor:snapfit.defaultFalsecolor,mcolor:snapfit.defaultMatchcolor,acolor:snapfit.defaultAreacolor,aopacity:snapfit.defaultAreaopacity,aborder:snapfit.defaultAreaborder,aimage:snapfit.defaultAreaimage,bopacity:snapfit.defaultBorderopacity,bwide:snapfit.defaultBorderwide,sopacity:snapfit.defaultShadowopacity,forcetui:snapfit.defaultForcetouchui,callback:snapfit.defaultCallback};if(o)for(var f in c)o[f]||(o[f]=c[f]);else o=c;if(n="iwidth"in o?parseInt(o.iwidth):t.width,h="iheight"in o?parseInt(o.iheight):t.height,document.all&&document.namespaces&&!window.opera&&(!document.documentMode||document.documentMode<9)){if(null==document.namespaces.v){for(var p=["shape","shapetype","group","background","path","formulas","handles","fill","stroke","shadow","textbox","textpath","imagedata","line","polyline","curve","roundrect","oval","rect","arc","image"],d=document.createStyleSheet(),f=0;f<p.length;f++)d.addRule("v\\:"+p[f],"behavior: url(#default#VML);");document.namespaces.add("v","urn:schemas-microsoft-com:vml")}var b="block"==t.currentStyle.display.toLowerCase()?"block":"inline-block";l=1,a=document.createElement(['<var unselectable="on" style="zoom:1;display:'+b+";overflow:hidden;width:"+n+"px;height:"+h+'px;padding:0px;">'].join(""));var u=t.currentStyle.styleFloat.toLowerCase();a.dpl="left"==u||"right"==u?"inline":b}else a=document.createElement("canvas"),r=document.createElement("canvas");return l&&a||r&&a&&r.getContext("2d")&&a.getContext("2d")?(a.id="undefined"==t.id||""==t.id?e():t.id,a.vml=l,a.alt=t.alt,a.title=t.title,a.img=t.src,a.className=t.className,a.style.cssText=t.style.cssText,a.style.height=h+"px",a.style.width=n+"px",a.height=h,a.width=n,a.sf=Math.min(1-Math.min(.01*("number"==typeof o.space?o.space:snapfit.defaultSpace),.5),1),a.iw=parseInt(a.width*a.sf),a.ih=parseInt(a.height*a.sf),a.xo=parseInt((a.width-a.iw)/2),a.yo=parseInt((a.height-a.ih)/2),a.wk4=-1==navigator.appVersion.indexOf("WebKit")||document.defaultCharset?0:1,a.ge8=navigator.userAgent.indexOf("Gecko")>-1&&window.updateCommands&&!window.external?1:0,a.vml?t.parentNode.replaceChild(a,t):(r.height=a.ih,r.width=a.iw,r.style.height=r.height+"px",r.style.width=r.width+"px",a.wk4&&(r.id=a.id+"_buffer",r.style.position="fixed",r.style.left="-99999px",r.style.top="0px",t.parentNode.appendChild(r)),r.ctx=r.getContext("2d"),r.ctx.drawImage(t,0,0,a.iw,a.ih),t.parentNode.replaceChild(a,t),a.reso=r),a.pc=Math.min(Math.max("number"==typeof o.level?o.level:snapfit.defaultLevel,0),6),a.sv=Math.min(Math.max("number"==typeof o.snap?o.snap:snapfit.defaultSnap,1),24),a.tof="boolean"==typeof o.tofront?o.tofront:snapfit.defaultTofront,a.fui="boolean"==typeof o.forcetui?o.forcetui:snapfit.defaultForcetouchui,a.nak="boolean"==typeof o.nokeys?o.nokeys:snapfit.defaultNokeys,a.ply="boolean"==typeof o.polygon?o.polygon:snapfit.defaultPolygon,a.pos="boolean"==typeof o.simple?o.simple:snapfit.defaultSimple,a.mix="boolean"==typeof o.mixed?o.mixed:snapfit.defaultMixed,a.cb="function"==typeof o.callback?o.callback:snapfit.defaultCallback,a.bw=Math.min(Math.max("number"==typeof o.bwide?o.bwide:snapfit.defaultBorderwide,1),6),a.bo=Math.min(Math.max("number"==typeof o.bopacity?o.bopacity:snapfit.defaultBorderopacity,0),1),a.ao=Math.min(Math.max("number"==typeof o.aopacity?o.aopacity:snapfit.defaultAreaopacity,0),1),a.so=Math.min(Math.max("number"==typeof o.sopacity?o.sopacity:snapfit.defaultShadowopacity,0),1),a.hxs=s(parseInt(255*(1-a.so))),a.lsd=300,a.nhc=!1,a.ab="boolean"==typeof o.aborder?o.aborder:snapfit.defaultAreaborder,a.ai="boolean"==typeof o.aimage?o.aimage:snapfit.defaultAreaimage,a.bcl="string"==typeof o.bcolor&&o.bcolor.match(/^#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]$/i)?o.bcolor:snapfit.defaultBgrndcolor,a.fcl="string"==typeof o.fcolor&&o.fcolor.match(/^#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]$/i)?o.fcolor:snapfit.defaultFalsecolor,a.acl="string"==typeof o.acolor&&o.acolor.match(/^#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]$/i)?o.acolor:snapfit.defaultAreacolor,a.mcl="string"==typeof o.mcolor&&o.mcolor.match(/^#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]$/i)?o.mcolor:snapfit.defaultMatchcolor,a.aos=navigator.userAgent.match(/android/i),a.ios=navigator.platform.match(/iPad|iPhone|iPod/i),a.stg="undefined"!=typeof document.ontouchstart?!0:!1,a.tod=a.stg&&(a.ios||a.aos||a.fui)?!0:!1,a.tmp=Math.min(a.iw,a.ih)/(a.ply?2:1),a.sz=[Math.min(a.tmp,160),Math.min(a.tmp,128),Math.min(a.tmp,104),Math.min(a.tmp,80),Math.min(a.tmp,64),Math.min(a.tmp,56),Math.min(a.tmp,48)],a.dbc=i(a.bcl),a.dfc=i(a.fcl),a.dac=i(a.acl),a.dmc=i(a.mcl),a.currtap=0,a.lasttap=0,a.style.MozUserSelect="none",a.style.KhtmlUserSelect="none",a.style.WebkitUserSelect="none",a.style.WebkitTouchCallout="none",a.unselectable="on",a.offsetX=snapfit._xoff(a),a.offsetY=snapfit._yoff(a),a.deltaX=0,a.deltaY=0,a.evtX=0,a.evtY=0,a.dragging=!1,a.progress=!1,a.solved=!1,a.admixed=!1,a.cur=-1,snapfit.reset(a,a.pc,!0),a.mix&&snapfit.admix(a,a.pos,!0),a.vml?(a.oncontextmenu=function(){return!1},a.nak||(a.onmouseenter=this._catchEnter,a.onmouseleave=this._catchLeave)):(a.ctx=a.getContext("2d"),a.ctx.shadowOffsetX=0,a.ctx.shadowOffsetY=0,a.ctx.shadowBlur=0,a.ctx.shadowColor="rgba(0,0,0,0)",a.tod?a.ontouchstart=this._catchTouch:(a.onmousedown=this._isPressed,a.onmousemove=this._isDragged,a.onmouseup=this._isReleased,a.ondblclick=this._isDblclicked,a.onmouseout=this._isReleased,a.onclick=function(){return!1},a.oncontextmenu=function(){return!1},a.nak||(a.onmouseover=this._catchOver,a.addEventListener("mouseout",this._catchOut,!1)))),snapfit._paint(a),!0):!1}return!1},remove:function(t){if(!t.progress&&(t.getContext||"VAR"==t.tagName.toUpperCase())){var o=t.parentNode,e=document.createElement("img");t.wk4&&o.removeChild(document.getElementById(t.id+"_buffer")),e.id=t.id,e.alt=t.alt,e.title=t.title,e.src=t.img,e.className=t.className,e.style.cssText=t.style.cssText,e.style.height=t.height+"px",e.style.width=t.width+"px",o.replaceChild(e,t)}},reset:function(t,o,e){if(t.progress||!t.getContext&&"VAR"!=t.tagName.toUpperCase())return!1;t.progress=!0,t.style.cursor=t.vml?"wait":"progress",t.pc=Math.min(Math.max("number"==typeof o?o:t.pc,0),6);var i,s,a,r,n,h,l,c,f,p,d,b,u,j=0,m=t.sz[t.pc],g={};if(r=t.iw/m,c=Math.round(r),b=t.iw/c,f=b/t.iw,h=.25*f,r=t.ih/m,p=Math.round(r),u=t.ih/p,d=u/t.ih,l=.25*d,n=[[0,0],[0,d],[f,d],[f,0]],t.obj=[],t.ply)for(g.lt=[[0,0],[0,d],[h,d],[f/2,d+l],[f-h,d],[f,d],[f,d-l],[f+h,d/2],[f,l],[f,0]],g.ltz=snapfit._shade(g.lt,t.lsd,t.nhc),g.ct=[[0,0],[0,l],[h,d/2],[0,d-l],[0,d],[h,d],[f/2,d+l],[f-h,d],[f,d],[f,d-l],[f+h,d/2],[f,l],[f,0]],g.ctz=snapfit._shade(g.ct,t.lsd,t.nhc),g.rt=[[0,0],[0,l],[h,d/2],[0,d-l],[0,d],[h,d],[f/2,d+l],[f-h,d],[f,d],[f,0]],g.rtz=snapfit._shade(g.rt,t.lsd,t.nhc),g.lc=[[0,0],[0,d],[h,d],[f/2,d+l],[f-h,d],[f,d],[f,d-l],[f+h,d/2],[f,l],[f,0],[f-h,0],[f/2,l],[h,0]],g.lcz=snapfit._shade(g.lc,t.lsd,t.nhc),g.cc=[[0,0],[0,l],[h,d/2],[0,d-l],[0,d],[h,d],[f/2,d+l],[f-h,d],[f,d],[f,d-l],[f+h,d/2],[f,l],[f,0],[f-h,0],[f/2,l],[h,0]],g.ccz=snapfit._shade(g.cc,t.lsd,t.nhc),g.rc=[[0,0],[0,l],[h,d/2],[0,d-l],[0,d],[h,d],[f/2,d+l],[f-h,d],[f,d],[f,0],[f-h,0],[f/2,l],[h,0]],g.rcz=snapfit._shade(g.rc,t.lsd,t.nhc),g.lb=[[0,0],[0,d],[f,d],[f,d-l],[f+h,d/2],[f,l],[f,0],[f-h,0],[f/2,l],[h,0]],g.lbz=snapfit._shade(g.lb,t.lsd,t.nhc),g.cb=[[0,0],[0,l],[h,d/2],[0,d-l],[0,d],[f,d],[f,d-l],[f+h,d/2],[f,l],[f,0],[f-h,0],[f/2,l],[h,0]],g.cbz=snapfit._shade(g.cb,t.lsd,t.nhc),g.rb=[[0,0],[0,l],[h,d/2],[0,d-l],[0,d],[f,d],[f,0],[f-h,0],[f/2,l],[h,0]],g.rbz=snapfit._shade(g.rb,t.lsd,t.nhc),i=0;p>i;i++)if(0==i)for(s=0;c>s;s++)t.obj[j]=new Object,t.obj[j].a=0,t.obj[j].f=0,t.obj[j].m=0,t.obj[j].x=s*f,t.obj[j].y=i*d,0==s?(t.obj[j].s=0,t.obj[j].w=f+h,t.obj[j].h=d+l,t.obj[j].t=g.lt,t.obj[j].l=g.ltz):s==c-1?(t.obj[j].s=1,t.obj[j].w=f,t.obj[j].h=d+l,t.obj[j].t=g.rt,t.obj[j].l=g.rtz):(t.obj[j].s=0,t.obj[j].w=f+h,t.obj[j].h=d+l,t.obj[j].t=g.ct,t.obj[j].l=g.ctz),j++;else if(i==p-1)for(s=0;c>s;s++)t.obj[j]=new Object,t.obj[j].a=0,t.obj[j].f=0,t.obj[j].m=0,t.obj[j].x=s*f,t.obj[j].y=i*d,0==s?(t.obj[j].s=2,t.obj[j].w=f+h,t.obj[j].h=d,t.obj[j].t=g.lb,t.obj[j].l=g.lbz):s==c-1?(t.obj[j].s=3,t.obj[j].w=f,t.obj[j].h=d,t.obj[j].t=g.rb,t.obj[j].l=g.rbz):(t.obj[j].s=2,t.obj[j].w=f+h,t.obj[j].h=d,t.obj[j].t=g.cb,t.obj[j].l=g.cbz),j++;else for(s=0;c>s;s++)t.obj[j]=new Object,t.obj[j].a=0,t.obj[j].f=0,t.obj[j].m=0,t.obj[j].x=s*f,t.obj[j].y=i*d,0==s?(t.obj[j].s=0,t.obj[j].w=f+h,t.obj[j].h=d+l,t.obj[j].t=g.lc,t.obj[j].l=g.lcz):s==c-1?(t.obj[j].s=1,t.obj[j].w=f,t.obj[j].h=d+l,t.obj[j].t=g.rc,t.obj[j].l=g.rcz):(t.obj[j].s=0,t.obj[j].w=f+h,t.obj[j].h=d+l,t.obj[j].t=g.cc,t.obj[j].l=g.ccz),j++;else for(i=0;p>i;i++)for(s=0;c>s;s++)t.obj[j]=new Object,t.obj[j].a=0,t.obj[j].f=0,t.obj[j].m=0,t.obj[j].x=s*f,t.obj[j].y=i*d,t.obj[j].w=f,t.obj[j].h=d,t.obj[j].t=n,j++;for(i=0;i<t.obj.length;i++){for(a=[],r=t.obj[i].t,s=0;s<r.length;s++)a[s]=[r[s][0]*t.iw,r[s][1]*t.ih];t.obj[i].q=!0,t.obj[i].z=!0,t.obj[i].t=a,t.obj[i].w=t.obj[i].w*t.iw,t.obj[i].h=t.obj[i].h*t.ih,t.obj[i].x=t.xo+t.obj[i].x*t.iw,t.obj[i].y=t.yo+t.obj[i].y*t.ih,t.obj[i].ox=t.obj[i].x-t.xo,t.obj[i].oy=t.obj[i].y-t.yo,t.obj[i].ow=t.obj[i].w,t.obj[i].oh=t.obj[i].h}if(t.vml){var y,x,v,w,_,k="";x='<v:group oncontextmenu="return false" unselectable="on" style="zoom:1;display:'+t.dpl+";margin:0px;padding:0px;position:relative;width:"+t.width+"px;height:"+t.height+'px;" coordsize="'+t.width+","+t.height+'"><v:rect oncontextmenu="return false" unselectable="on" strokeweight="0" filled="f" stroked="f" strokeweight="0" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+t.width+"px;height:"+t.height+'px;"></v:rect>',v="</v:group>",_='<v:rect oncontextmenu="return false" unselectable="on" filled="t" stroked="'+(!t.ai&&t.ab?"t":"f")+'" strokeweight="'+(!t.ai&&t.ab?1:0)+'" style="zoom:1;margin:0px;padding:0px;display:block;position:absolute;top:'+t.yo+"px;left:"+t.xo+"px;width:"+t.iw+"px;height:"+t.ih+"px; filter:Alpha(opacity="+(t.ai?0:100*t.ao)+')"><v:fill color="'+t.acl+'" /></v:rect>',w='<v:rect oncontextmenu="return false" unselectable="on" filled="t" stroked="'+(t.ai&&t.ab?"t":"f")+'" strokeweight="'+(t.ai&&t.ab?1:0)+'" style="zoom:1;margin:0px;padding:0px;display:block;position:absolute;top:'+t.yo+"px;left:"+t.xo+"px;width:"+t.iw+"px;height:"+t.ih+"px; filter:Alpha(opacity="+(t.ai?100*t.ao:0)+')"><v:fill src="'+t.img+'" type="frame" aspect="atleast" /></v:rect>';var g,M,I,C,S=0,X=.5,z=.5,E=parseFloat(1/c),Y=parseFloat(1/p);for(b=c,u=p,t.ply&&(I=t.obj[t.obj.length-1].w/t.obj[0].w,C=t.obj[t.obj.length-1].h/t.obj[0].h,h=2>=c?.5-(1-I)/1.5:.5-.5*(1-I)/(.5*c),l=2>=p?.5-(1-C)/1.5:.5-.5*(1-C)/(.5*p)),i=0;p>i;i++)for(s=0;c>s;s++){for(r=t.obj[S].t,t.ply&&(b=parseFloat(t.iw/t.obj[S].w),u=parseFloat(t.ih/t.obj[S].h),3==t.obj[S].s?(X=.5,z=.5):(X=0==t.obj[S].s||2==t.obj[S].s?h:.5,z=0==t.obj[S].s||1==t.obj[S].s?l:.5)),g="m "+parseInt(100*r[0][0])+","+parseInt(100*r[0][1]),M=1;M<r.length;M++)g+=" l "+parseInt(100*r[M][0])+","+parseInt(100*r[M][1]);g+=" x e",k+='<v:shape id="'+t.id+"|obj_"+S+'" oncontextmenu="return false" unselectable="on" filled="t" stroked="t" strokeweight="1" strokecolor="'+t.bcl+'" coordorigin="0,0" coordsize="'+parseInt(100*t.obj[S].w)+","+parseInt(100*t.obj[S].h)+'" path="'+g+'" style="cursor:hand;zoom:1;margin:0px;padding:0px;display:block;position:absolute;top:'+t.obj[S].y+"px;left:"+t.obj[S].x+"px;width:"+t.obj[S].w+"px;height:"+t.obj[S].h+'px; filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=0);"><v:fill color="'+t.bcl+'" opacity="1" src="'+t.img+'" type="frame" aspect="atleast" size="'+b+","+u+'" origin="'+(s+X-c*X)*E+","+(i+z-p*z)*Y+'" position="0,0" /></v:shape>',S++}for(t.innerHTML=x+_+w+k+v,i=0;i<t.obj.length;i++)y=document.getElementById(t.id+"|obj_"+i),y.ondblclick=snapfit._ieDblclicked,y.onmousedown=snapfit._iePressed}if(window.opera)for(i=0;i<t.obj.length;i++)t.obj[i].ow=t.obj[i].ow-.001,t.obj[i].oh=t.obj[i].oh-.001;return e||snapfit._paint(t),t.style.cursor="auto",t.progress=!1,t.solved=!0,!0},admix:function(t,o,e){function i(t){return Math.floor(Math.random()*t)}if(o=o||!1,t.progress||!t.getContext&&"VAR"!=t.tagName.toUpperCase())return!1;var s,a,r,n,h,l=90;if(t.solved=!1,t.admixed=!1,t.progress=!0,t.vml)for(t.style.cursor="wait",a=0;a<t.obj.length;a++)s=document.getElementById(t.id+"|obj_"+a),o||(n=i(4),t.obj[a].a=90*n,t.obj[a].f=i(2),s.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+parseInt(t.obj[a].a/90)+", mirror="+t.obj[a].f+")",s.firstChild.color=t.bcl,s.firstChild.opacity=t.obj[a].f?t.bo:1),t.obj[a].x=i(t.width-t.obj[a].w),t.obj[a].y=i(t.height-t.obj[a].h),s.style.left=t.obj[a].x+"px",s.style.top=t.obj[a].y+"px";else{for(t.style.cursor="progress",a=0;a<t.obj.length;a++)if(t.obj[a].x=i(t.width-t.obj[a].w),t.obj[a].y=i(t.height-t.obj[a].h),n=i(4),!o){for(r=0;n>r;r++)h=t.obj[a].a,t.obj[a]=snapfit._rotate(t.obj[a],t.width,t.height,l,t.ply,t.lsd,t.nhc),t.obj[a].a=360-l>h?t.obj[a].a+l:0;i(2)&&(t.obj[a].t=snapfit._flipY(t.obj[a].t,t.obj[a].x,t.obj[a].w),t.ply&&(t.obj[a].l=snapfit._shade(t.obj[a].t,t.lsd,t.nhc)),90==t.obj[a].a||270==t.obj[a].a?t.obj[a].m=t.obj[a].m?0:1:t.obj[a].f=t.obj[a].f?0:1),i(2)&&(t.obj[a].t=snapfit._flipX(t.obj[a].t,t.obj[a].y,t.obj[a].h),t.ply&&(t.obj[a].l=snapfit._shade(t.obj[a].t,t.lsd,t.nhc)),90==t.obj[a].a||270==t.obj[a].a?t.obj[a].f=t.obj[a].f?0:1:t.obj[a].m=t.obj[a].m?0:1)}e||snapfit._paint(t)}for(a=0;a<t.obj.length;a++)p=t.obj[a],t.obj[a].z=(p.f&&p.m&&180==p.a||!p.f&&!p.m&&0==p.a)&&(p.x!=p.ox+t.xo||p.x!=p.ox+t.xo||p.y!=p.oy+t.yo||p.y!=p.oy+t.yo)?!0:!1;for(a=0;a<t.obj.length;a++)t.obj[a].q=!1;return t.style.cursor="auto",t.progress=!1,t.solved=!1,t.admixed=!0,!0},solve:function(t,o){if(t.progress||!t.getContext&&"VAR"!=t.tagName.toUpperCase())return!1;var e,i,s,a,r=0,n=4,h=90,l=snapfit._isSolved(t);if(l)return!1;if(t.vml){for(e=0;e<t.obj.length;e++)r=document.getElementById(t.id+"|obj_"+e),t.obj[e].f=0,t.obj[e].a=0,t.obj[e].w=t.obj[e].ow,t.obj[e].h=t.obj[e].oh,r.firstChild.opacity=1,r.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=0)";if(!o){t.timer&&window.clearInterval(t.timer),t.progress=!0,t.style.cursor="wait";var c=0,f=0,p=20,d=1/p,b=[],u=[],j=[],m=[];for(e=0;e<t.obj.length;e++)b[e]=t.obj[e].x,u[e]=t.obj[e].y,j[e]=t.obj[e].ox+t.xo,m[e]=t.obj[e].oy+t.yo;t.timer=window.setInterval(function(){for(c=-Math.cos(d*f*Math.PI)/2+.5||0,e=0;e<t.obj.length;e++)r=document.getElementById(t.id+"|obj_"+e),r.style.left=Math.ceil(b[e]+c*(j[e]-b[e]))+"px",r.style.top=Math.ceil(u[e]+c*(m[e]-u[e]))+"px";if(f++,f>p){for(window.clearInterval(t.timer),e=0;e<t.obj.length;e++)t.obj[e].x=t.obj[e].ox+t.xo,t.obj[e].y=t.obj[e].oy+t.yo,t.obj[e].z=!0,r=document.getElementById(t.id+"|obj_"+e),r.style.left=t.obj[e].x+"px",r.style.top=t.obj[e].y+"px";t.style.cursor="auto",t.progress=!1}},30)}}else{for(e=0;e<t.obj.length;e++){for(r=90==t.obj[e].a||270==t.obj[e].a?1:0,(t.obj[e].m&&r||t.obj[e].f)&&(t.obj[e].t=snapfit._flipY(t.obj[e].t,t.obj[e].x,t.obj[e].w),t.ply&&(t.obj[e].l=snapfit._shade(t.obj[e].t,t.lsd,t.nhc)),r?t.obj[e].m=t.obj[e].m?0:1:t.obj[e].f=t.obj[e].f?0:1),(t.obj[e].f&&r||t.obj[e].m)&&(t.obj[e].t=snapfit._flipX(t.obj[e].t,t.obj[e].y,t.obj[e].h),t.ply&&(t.obj[e].l=snapfit._shade(t.obj[e].t,t.lsd,t.nhc)),r?t.obj[e].f=t.obj[e].f?0:1:t.obj[e].m=t.obj[e].m?0:1),(t.obj[e].m&&r||t.obj[e].f)&&(t.obj[e].t=snapfit._flipY(t.obj[e].t,t.obj[e].x,t.obj[e].w),t.ply&&(t.obj[e].l=snapfit._shade(t.obj[e].t,t.lsd,t.nhc)),r?t.obj[e].m=t.obj[e].m?0:1:t.obj[e].f=t.obj[e].f?0:1),(t.obj[e].f&&r||t.obj[e].m)&&(t.obj[e].t=snapfit._flipX(t.obj[e].t,t.obj[e].y,t.obj[e].h),t.ply&&(t.obj[e].l=snapfit._shade(t.obj[e].t,t.lsd,t.nhc)),r?t.obj[e].f=t.obj[e].f?0:1:t.obj[e].m=t.obj[e].m?0:1),l=t.obj[e].a/90,s=l>0?n-l:0,i=0;s>i;i++)a=t.obj[e].a,t.obj[e]=snapfit._rotate(t.obj[e],t.width,t.height,h,t.ply,t.lsd,t.nhc),t.obj[e].a=360-h>a?t.obj[e].a+h:0;o&&(t.obj[e].x=t.obj[e].ox+t.xo,t.obj[e].y=t.obj[e].oy+t.yo,t.obj[e].z=!0)}if(!o){t.timer&&window.clearInterval(t.timer),t.progress=!0,t.style.cursor="progress";var c=0,f=0,p=20,d=1/p,b=[],u=[],j=[],m=[];for(e=0;e<t.obj.length;e++)b[e]=t.obj[e].x,u[e]=t.obj[e].y,j[e]=t.obj[e].ox+t.xo,m[e]=t.obj[e].oy+t.yo;t.timer=window.setInterval(function(){for(c=-Math.cos(d*f*Math.PI)/2+.5||0,e=0;e<t.obj.length;e++)t.obj[e].x=Math.ceil(b[e]+c*(j[e]-b[e])),t.obj[e].y=Math.ceil(u[e]+c*(m[e]-u[e]));if(f++,snapfit._paint(t),f>p){for(window.clearInterval(t.timer),e=0;e<t.obj.length;e++)t.obj[e].x=t.obj[e].ox+t.xo,t.obj[e].y=t.obj[e].oy+t.yo,t.obj[e].z=!0;snapfit._paint(t),t.style.cursor="auto",t.progress=!1}},30)}}for(e=0;e<t.obj.length;e++)t.obj[e].q=!0;return t.solved=!0,!0},_paint:function(t){if(!t.vml&&t.obj){var o,e,i,s,a,r,n,h,l=t.reso;for(t.ctx.clearRect(0,0,t.width,t.height),t.ctx.fillStyle="rgba("+t.dac+","+t.ao+")",t.ab&&(t.ctx.lineWidth=1,t.ctx.strokeStyle="rgba(0,0,0,"+t.ao+")",t.ctx.strokeRect(t.xo,t.yo,t.iw,t.ih)),t.ai?(t.ctx.globalAlpha=t.ao,t.ctx.drawImage(l,t.xo,t.yo,t.iw,t.ih),t.ctx.globalAlpha=1):t.ctx.fillRect(t.xo,t.yo,t.iw,t.ih),t.ctx.save(),s=0;s<t.obj.length;s++){for(o=t.obj[s],t.ctx.save(),s==t.cur&&(t.ctx.shadowColor="rgba(0,0,0,"+t.so+")"),t.ctx.fillStyle="rgba("+t.dac+",1)"||"rgba(255,255,255,1)",t.ctx.beginPath(),t.ctx.moveTo(o.x+o.t[0][0],o.y+o.t[0][1]),a=1;a<o.t.length;a++)t.ctx.lineTo(o.x+o.t[a][0],o.y+o.t[a][1]);if(t.ctx.closePath(),t.ctx.fill(),s==t.cur&&(t.ctx.shadowColor="rgba(0,0,0,0)"),t.wk4){for(t.ctx.beginPath(),t.ctx.moveTo(o.x+o.t[0][0],o.y+o.t[0][1]),a=1;a<o.t.length;a++)t.ctx.lineTo(o.x+o.t[a][0],o.y+o.t[a][1]);t.ctx.closePath()}if(t.ctx.clip(),t.ge8&&(t.ctx.fillStyle="rgba(0,0,0,0)",t.ctx.fillRect(o.x,o.y,o.w,o.h)),0!=o.a||o.f||o.m?(t.ctx.save(),r=o.x,n=o.y,h=(o.a+(o.a>=0?0:360))*Math.PI/180,t.ctx.translate(r,n),t.ctx.rotate(h),t.ctx.scale(o.f?-1:1,o.m?-1:1),t.ctx.translate(-r,-n),90==o.a?t.ctx.drawImage(l,o.ox,o.oy,o.ow,o.oh,o.x-o.f*o.ow,o.y-o.oh+o.m*o.oh,o.ow,o.oh):180==o.a?t.ctx.drawImage(l,o.ox,o.oy,o.ow,o.oh,o.x-o.ow+o.f*o.ow,o.y-o.oh+o.m*o.oh,o.ow,o.oh):270==o.a?t.ctx.drawImage(l,o.ox,o.oy,o.ow,o.oh,o.x-o.ow+o.f*o.ow,o.y-o.m*o.oh,o.ow,o.oh):t.ctx.drawImage(l,o.ox,o.oy,o.ow,o.oh,o.x-o.f*o.ow,o.y-o.m*o.oh,o.ow,o.oh),t.ctx.restore()):t.ctx.drawImage(l,o.ox,o.oy,o.ow,o.oh,o.x,o.y,o.w,o.h),t.ctx.lineWidth=2*t.bw,t.progress||s!=t.cur)if(t.ply)if(!o.f&&o.m||o.f&&!o.m){if(t.ctx.fillStyle="rgba("+t.dbc+","+t.bo+")",t.ctx.fillRect(o.x,o.y,o.w,o.h),t.ctx.strokeStyle="rgba("+t.dbc+",1)",t.wk4||t.ge8){for(t.ctx.beginPath(),t.ctx.moveTo(o.x+o.t[0][0],o.y+o.t[0][1]),a=1;a<o.t.length;a++)t.ctx.lineTo(o.x+o.t[a][0],o.y+o.t[a][1]);t.ctx.closePath()}t.ctx.stroke()}else for(a=0;a<o.t.length;a++)e=o.l[a],i=a<o.t.length-1?a+1:0,t.ctx.strokeStyle="rgba("+e+","+e+","+e+","+t.bo+")",t.ctx.beginPath(),t.ctx.moveTo(o.x+o.t[a][0],o.y+o.t[a][1]),t.ctx.lineTo(o.x+o.t[i][0],o.y+o.t[i][1]),t.ctx.stroke();else!o.f&&o.m||o.f&&!o.m?(t.ctx.fillStyle="rgba("+t.dbc+","+t.bo+")",t.ctx.fillRect(o.x,o.y,o.w,o.h),t.ctx.strokeStyle="rgba("+t.dbc+",1)",t.ctx.strokeRect(o.x,o.y,o.w,o.h)):(t.ctx.strokeStyle="rgba(0,0,0,"+t.bo+")",t.ctx.strokeRect(o.x-t.bw,o.y-t.bw,o.w+t.bw,o.h+t.bw),t.ctx.strokeStyle="rgba(255,255,255,"+t.bo+")",t.ctx.strokeRect(o.x,o.y,o.w+t.bw,o.h+t.bw));else if((!o.f&&o.m||o.f&&!o.m)&&(t.ctx.fillStyle="rgba("+t.dbc+","+t.bo+")",t.ctx.fillRect(o.x,o.y,o.w,o.h)),t.ctx.strokeStyle=(o.f&&o.m&&180==o.a||!o.f&&!o.m&&0==o.a)&&o.x<=o.ox+t.xo+t.sv&&o.x>=o.ox+t.xo-t.sv&&o.y<=o.oy+t.yo+t.sv&&o.y>=o.oy+t.yo-t.sv?"rgba("+t.dmc+",1)":"rgba("+t.dfc+",1)",t.ply){if(t.wk4||t.ge8){for(t.ctx.beginPath(),t.ctx.moveTo(o.x+o.t[0][0],o.y+o.t[0][1]),a=1;a<o.t.length;a++)t.ctx.lineTo(o.x+o.t[a][0],o.y+o.t[a][1]);t.ctx.closePath()}t.ctx.stroke()}else t.ctx.strokeRect(o.x,o.y,o.w,o.h);t.ctx.restore()}t.ctx.restore()}return!1},_catchTouch:function(t){function o(t,o){var e=t[o];return t.splice(o,1),t.push(e),t}if(this.obj&&1==t.touches.length&&!this.progress){t.preventDefault(),this.cur=-1,this.dragging=!1,this.currtap=(new Date).getTime(),this.evtX=t.touches[0].pageX-this.offsetX,this.evtY=t.touches[0].pageY-this.offsetY;var e=this.currtap-this.lasttap||0;if(400>e&&e>0){if(this.lasttap=-1,this.cur=snapfit._isContained(this),this.cur>-1){var i=90,s=this.obj[this.cur];s.f&&!s.m?(this.obj[this.cur].t=snapfit._flipY(s.t,s.x,s.w),this.ply&&(this.obj[this.cur].l=snapfit._shade(this.obj[this.cur].t,this.lsd,this.nhc)),90==s.a||270==s.a?this.obj[this.cur].m=s.m?0:1:this.obj[this.cur].f=s.f?0:1):!s.f&&s.m?(this.obj[this.cur].t=snapfit._flipX(s.t,s.y,s.h),this.ply&&(this.obj[this.cur].l=snapfit._shade(this.obj[this.cur].t,this.lsd,this.nhc)),90==s.a||270==s.a?this.obj[this.cur].f=s.f?0:1:this.obj[this.cur].m=s.m?0:1):(this.obj[this.cur]=snapfit._rotate(s,this.width,this.height,i,this.ply,this.lsd,this.nhc),this.obj[this.cur].a=s.a<360-i?s.a+i:0),snapfit._isCatched(this,this.cur),this.cur=-1,snapfit._paint(this),snapfit._ifSolved(this,this.cur)}}else this.lasttap=this.currtap,this.cur=snapfit._isContained(this),this.cur>-1&&(this.cur!=this.obj.length-1&&(this.obj=o(this.obj,this.cur),this.cur=this.obj.length-1),this.deltaX=this.evtX-this.obj[this.cur].x,this.deltaY=this.evtY-this.obj[this.cur].y,this.ontouchmove=snapfit._touchMove,this.ontouchend=snapfit._touchEnd,this.dragging=!0)}return!1},_touchMove:function(t){return 1==t.touches.length&&this.dragging&&!this.progress&&(this.evtX=t.touches[0].pageX-this.offsetX,this.evtY=t.touches[0].pageY-this.offsetY,this.obj[this.cur].x=Math.min(this.width-this.obj[this.cur].w,Math.max(0,this.evtX-this.deltaX)),this.obj[this.cur].y=Math.min(this.height-this.obj[this.cur].h,Math.max(0,this.evtY-this.deltaY)),snapfit._paint(this)),!1},_touchEnd:function(){return this.progress?!1:(this.dragging&&!this.progress&&(this.ontouchmove=null,this.ontouchend=null,this.dragging=!1,snapfit._isCatched(this,this.cur),this.cur=-1,snapfit._paint(this),snapfit._ifSolved(this,this.cur)),!1)},_isPressed:function(t){function o(t,o){var e=t[o];return t.splice(o,1),t.push(e),t}if(this.progress)return!1;if(this.obj&&(this.evtX=t.pageX-this.offsetX,this.evtY=t.pageY-this.offsetY,this.cur=snapfit._isContained(this),this.cur>-1)){var e=this.obj[this.cur];this.cur!=this.obj.length-1&&(this.obj=o(this.obj,this.cur),this.cur=this.obj.length-1),2==t.which?(this.obj[this.cur].t=snapfit._flipY(e.t,e.x,e.w),this.ply&&(this.obj[this.cur].l=snapfit._shade(this.obj[this.cur].t,this.lsd,this.nhc)),90==e.a||270==e.a?this.obj[this.cur].m=e.m?0:1:this.obj[this.cur].f=e.f?0:1,snapfit._isCatched(this,this.cur),this.cur=-1):3==t.which?(this.obj[this.cur].t=snapfit._flipX(e.t,e.y,e.h),this.ply&&(this.obj[this.cur].l=snapfit._shade(this.obj[this.cur].t,this.lsd,this.nhc)),90==e.a||270==e.a?this.obj[this.cur].f=e.f?0:1:this.obj[this.cur].m=e.m?0:1,snapfit._isCatched(this,this.cur),this.cur=-1):(this.dragging=!0,this.style.cursor="move",this.deltaX=this.evtX-this.obj[this.cur].x,this.deltaY=this.evtY-this.obj[this.cur].y),snapfit._paint(this)}return!1},_isDragged:function(t){return!this.dragging||this.progress?!1:(this.evtX=t.pageX-this.offsetX,this.evtY=t.pageY-this.offsetY,this.obj[this.cur].x=Math.min(this.width-this.obj[this.cur].w,Math.max(0,this.evtX-this.deltaX)),this.obj[this.cur].y=Math.min(this.height-this.obj[this.cur].h,Math.max(0,this.evtY-this.deltaY)),snapfit._paint(this),!1)},_isReleased:function(){return!this.dragging||this.progress?!1:(this.dragging=!1,snapfit._isCatched(this,this.cur),this.style.cursor="auto",this.cur=-1,snapfit._paint(this),snapfit._ifSolved(this,this.cur),!1)},_isDblclicked:function(t){var o=t.shiftKey,e=t.altKey;if(this.dragging=!1,this.style.cursor="auto",this.cur=-1,this.obj&&(this.cur=snapfit._isContained(this),this.cur>-1)){var i=90,s=this.obj[this.cur];o||e?o&&!e?(this.obj[this.cur].t=snapfit._flipY(s.t,s.x,s.w),this.ply&&(this.obj[this.cur].l=snapfit._shade(this.obj[this.cur].t,this.lsd,this.nhc)),90==s.a||270==s.a?this.obj[this.cur].m=s.m?0:1:this.obj[this.cur].f=s.f?0:1,snapfit._isCatched(this,this.cur),this.cur=-1):!o&&e&&(this.obj[this.cur].t=snapfit._flipX(s.t,s.y,s.h),this.ply&&(this.obj[this.cur].l=snapfit._shade(this.obj[this.cur].t,this.lsd,this.nhc)),90==s.a||270==s.a?this.obj[this.cur].f=s.f?0:1:this.obj[this.cur].m=s.m?0:1,snapfit._isCatched(this,this.cur),this.cur=-1):(this.obj[this.cur]=snapfit._rotate(s,this.width,this.height,i,this.ply,this.lsd,this.nhc),this.obj[this.cur].a=s.a<360-i?s.a+i:0,snapfit._isCatched(this,this.cur),this.cur=-1),snapfit._paint(this),snapfit._ifSolved(this,this.cur)}return!1},_iePressed:function(t){t=t?t:window.event;var o,e,i,s,a=t.srcElement,r=a.id.split("_"),n=parseInt(r[r.length-1]),h=a.parentNode,l=a.parentNode.parentNode;return l.progress||(2==t.button?(l.dragging=!1,l.obj[n].f=l.obj[n].f?0:1,a.firstChild.color=l.bcl,a.firstChild.opacity=l.obj[n].f?l.bo:1,a.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+parseInt(l.obj[n].a/90)+", mirror="+l.obj[n].f+")",snapfit._isCatched(l,n),a.style.left=l.obj[n].x+"px",a.style.top=l.obj[n].y+"px"):(i=parseInt(l.obj[n].a),s=0==i||180==i?i+135:i-45,s=l.obj[n].f?s+90:s,a.style.filter="progid:DXImageTransform.Microsoft.Shadow(Color="+l.hxs+", direction="+s+"), progid:DXImageTransform.Microsoft.BasicImage(rotation="+parseInt(l.obj[n].a/90)+", mirror="+l.obj[n].f+")",o=document.createElement("v:shape"),o.id=a.id,o.unselectable="on",o.oncontextmenu=function(){return!1},o.filled=a.filled,o.stroked=a.stroked,o.strokeweight=a.strokeweight,o.strokecolor=a.strokecolor,o.coordorigin=a.coordorigin,o.coordsize=a.coordsize,o.path=a.path,o.style.cssText=a.style.cssText,e=document.createElement("v:fill"),e=a.firstChild,h.removeChild(a),h.appendChild(o),o.appendChild(e),o.style.cursor="move",o.firstChild.color=l.bcl,o.mouseX=t.clientX,o.mouseY=t.clientY,o.ondblclick=snapfit._ieDblclicked,o.onmousedown=snapfit._iePressed,o.onmouseleave=snapfit._ieReleased,o.strokecolor=snapfit._isCatched(l,n)?l.mcl:l.fcl,document.attachEvent("onmousemove",snapfit._ieDragged),document.attachEvent("onmouseup",snapfit._ieReleased),cvi_stpiece=o.id,l.dragging=!0)),!1},_ieDragged:function(t){t=t?t:window.event;var o,e,i=t.srcElement,s=i.id.split("_"),a=parseInt(s[s.length-1]),r=i.parentNode.parentNode;return!r.progress&&r.dragging&&(cvi_stpiece==i.id?(o=Math.max(0,Math.min(r.width-parseInt(r.obj[a].w),parseInt(i.style.left)+(t.clientX-i.mouseX))),e=Math.max(0,Math.min(r.height-parseInt(r.obj[a].h),parseInt(i.style.top)+(t.clientY-i.mouseY))),r.obj[a].x=o,r.obj[a].y=e,i.firstChild.color=r.bcl,i.style.left=o+"px",i.style.top=e+"px",i.mouseX=t.clientX,i.mouseY=t.clientY,i.strokecolor=snapfit._isCatched(r,a)?r.mcl:r.fcl):snapfit._ieReleased(t)),!1},_ieReleased:function(t){t=t?t:window.event;var o=document.getElementById(cvi_stpiece),e=o.id.split("_"),i=parseInt(e[e.length-1]),s=o.parentNode.parentNode;return o&&!s.progress&&s.dragging&&(cvi_stpiece=null,o.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+parseInt(s.obj[i].a/90)+", mirror="+s.obj[i].f+")",snapfit._isCatched(s,i),o.style.cursor="hand",o.onmouseleave=null,o.strokecolor=s.bcl,o.style.left=s.obj[i].x+"px",o.style.top=s.obj[i].y+"px",document.detachEvent("onmousemove",snapfit._ieDragged),document.detachEvent("onmouseup",snapfit._ieReleased),s.dragging=!1,snapfit._ifSolved(s,s.cur)),!1},_ieDblclicked:function(t){t=t?t:window.event;var o=t.srcElement,e=o.id.split("_"),i=parseInt(e[e.length-1]),s=o.parentNode.parentNode,a=t.shiftKey,r=t.altKey,n=90;return s.progress||(s.dragging=!1,o.style.cursor="auto",a||r?(s.obj[i].f=s.obj[i].f?0:1,o.firstChild.color=s.bcl,o.firstChild.opacity=s.obj[i].f?s.bo:1):(s.obj[i].a=s.obj[i].a<360-n?s.obj[i].a+n:0,e=s.obj[i].w,s.obj[i].w=s.obj[i].h,s.obj[i].h=e),o.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+parseInt(s.obj[i].a/90)+", mirror="+s.obj[i].f+")",snapfit._isCatched(s,i),o.style.left=s.obj[i].x+"px",o.style.top=s.obj[i].y+"px",snapfit._ifSolved(s,s.cur)),!1},_isKeydown:function(t){if(null!=cvi_stactive){var o,e=46,i=27,s=13,a=8,r=document.getElementById(cvi_stactive);if(r.dragging||r.progress)return!1;switch(o=t.keyCode?t.keyCode:t.which){case i:snapfit.reset(r);break;case s:snapfit.solve(r);break;case a:snapfit.admix(r,!0);break;case e:snapfit.admix(r,!1)}}return!1},_isKeypressed:function(){return!1},_isKeyup:function(){return!1},_catchOver:function(){return cvi_stactive=this.id,this.focus(),document.addEventListener("keyup",snapfit._isKeyup,!1),document.addEventListener("keypress",snapfit._isKeypressed,!1),document.addEventListener("keydown",snapfit._isKeydown,!1),!1},_catchOut:function(){return cvi_stactive=null,document.removeEventListener("keyup",snapfit._isKeyup,!1),document.removeEventListener("keypress",snapfit._isKeypressed,!1),document.removeEventListener("keydown",snapfit._isKeydown,!1),!1},_catchEnter:function(){return cvi_stactive=this.id,this.focus(),document.attachEvent("onkeyup",snapfit._isKeyup),document.attachEvent("onkeypress",snapfit._isKeypressed),document.attachEvent("onkeydown",snapfit._isKeydown),!1},_catchLeave:function(){return cvi_stactive=null,document.detachEvent("onkeyup",snapfit._isKeyup),document.detachEvent("onkeypress",snapfit._isKeypressed),document.detachEvent("onkeydown",snapfit._isKeydown),!1},_ifSolved:function(t){return t.dragging&&t.progress||(!t.solved&&t.admixed&&snapfit._isSolved(t)&&t.cb?(t.solved=!0,t.admixed=!1,t.cb()):t.solved=!1),!1},_isSolved:function(t){if(t.admixed&&!t.solved){for(var o=0;o<t.obj.length;o++)if(!t.obj[o].q)return!1;return!0}return!1},_setBehind:function(t,o){function e(t,o){var e=t[o];return t.splice(o,1),t.unshift(e),t}return t.obj=e(t.obj,o),t.obj.cur=0,!1},_isBehind:function(t,o){function e(t,o){var e=t[o];return t.splice(o,1),t.push(e),t}var s,a,r,n=t.obj[o],h=n.x,l=n.y,c=n.x+n.w,f=n.y+n.h;for(i=t.obj.length-1;i>-1;i--)i!=o&&(r=t.obj[i],s=r.x+r.w,a=r.y+r.h,s>=h&&r.x<=c&&a>=l&&r.y<=f&&i!=t.obj.length-1&&(t.obj=e(t.obj,i),t.obj.cur=t.obj.length-1));return!1},_isContained:function(t){var o,e,i,s,a,r,n,h=t.evtX,l=t.evtY;for(o=t.obj.length-1;o>-1;o--){e=0,i=0,s=0,a=t.obj[o].t,r=t.obj[o].x,n=t.obj[o].y;for(i in a)e++,e==a.length&&(e=0),(n+a[i][1]<l&&n+a[e][1]>=l||n+a[e][1]<l&&n+a[i][1]>=l)&&r+a[i][0]+(l-(n+a[i][1]))/(n+a[e][1]-(n+a[i][1]))*(r+a[e][0]-(r+a[i][0]))<h&&(s=!s);if(s)return o}return-1},_isCatched:function(t,o){var e=t.obj[o];return(e.f&&e.m&&180==e.a||!e.f&&!e.m&&0==e.a)&&e.x<=e.ox+t.xo+t.sv&&e.x>=e.ox+t.xo-t.sv&&e.y<=e.oy+t.yo+t.sv&&e.y>=e.oy+t.yo-t.sv?(t.obj[o].x=e.ox+t.xo,t.obj[o].y=e.oy+t.yo,t.obj[o].z=!0,t.obj[o].q=!0,t.vml||(t.tof?snapfit._isBehind(t,o):snapfit._setBehind(t,o)),!0):(t.obj[o].z=!1,t.obj[o].q=!1,!1)},_rotate:function(t,o,e,i,s,a,r){function n(t,o){return t[0]-o[0]}function h(t,o){return t[1]-o[1]}var l,c,f,p,d,b=0,u=0,j=1,m=1,g=[],y=[],x=t.x+.5*t.w,v=t.y+.5*t.h,w=i*(Math.PI/180),_=Math.cos(w),k=Math.sin(w);for(l=0;l<t.t.length;l++)p=t.x+t.t[l][0],d=t.y+t.t[l][1],c=(p-x)*_-(d-v)*k+x,f=(d-v)*_+(p-x)*k+v,g[l]=[c,f];for(y=g.slice(),y.sort(n),b=y[0][0],j=y[y.length-1][0],y.sort(h),u=y[0][1],m=y[y.length-1][1],t.w=j-b,t.h=m-u,t.x=b,t.y=u,l=0;l<g.length;l++)g[l][0]=g[l][0]-t.x,g[l][1]=g[l][1]-t.y;return t.x=Math.max(Math.min(o-t.w,t.x),0),t.y=Math.max(Math.min(e-t.h,t.y),0),t.t=g,s&&(t.l=snapfit._shade(g,a,r)),t},_flipY:function(t,o,e){var i,s,a,r=o+.5*e,n=[];for(i=0;i<t.length;i++)a=o+t[i][0],r>a?(s=r+(r-a),n[i]=[Math.max(s-o,0),t[i][1]]):a>r?(s=r-(a-r),n[i]=[Math.max(s-o,0),t[i][1]]):n[i]=[t[i][0],t[i][1]];return n},_flipX:function(t,o,e){var i,s,a,r=o+.5*e,n=[];for(i=0;i<t.length;i++)a=o+t[i][1],r>a?(s=r+(r-a),n[i]=[t[i][0],Math.max(s-o,0)]):a>r?(s=r-(a-r),n[i]=[t[i][0],Math.max(s-o,0)]):n[i]=[t[i][0],t[i][1]];
return n},_shade:function(t,o,e){function i(t){return t>=0?t:0-t}function s(t,o){var e=Math.atan2(o,t);return 0>e&&(e=2*Math.PI+e),e}e=e||0;var a,r,n,h,l,c,f,p,d,b,u,j=(o-180)*(Math.PI/180),m=[];for(a=0;a<t.length;a++)f=t[a][0],b=t[a][1],a<t.length-1?(p=t[a+1][0],u=t[a+1][1]):(p=t[0][0],u=t[0][1]),d=u-b,c=f-p,r=2*Math.PI-s(c,d),n=i(j-r),h=.5*(Math.cos(n)+1),l=parseInt(0*h+255*(1-h)),m[a]=e?l:l>127?255:0;return m},_xoff:function(t){for(var o=t.offsetLeft,e=t;e=e.offsetParent;null!=e)o+=e.offsetLeft;return o},_yoff:function(t){for(var o=t.offsetTop,e=t;e=e.offsetParent;null!=e)o+=e.offsetTop;return o},_swap:function(o,e){return t=o[e],o[e]=o[o.length-1],o[o.length-1]=t,o}};